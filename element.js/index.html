<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutorial: JSCroot Element.js Functions</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Penjelasan Tutorial JSCroot Element.js</h1>

        <!-- Container Function -->
        <div class="section">
            <h2>1. Fungsi container()</h2>
            <p>Fungsi <code>container()</code> adalah wrapper (pembungkus) untuk <code>document.getElementById()</code>. 
               Fungsi ini memudahkan kita untuk mendapatkan element HTML berdasarkan ID-nya.</p>
            
            <div class="code-block">
export function container(id){
    return document.getElementById(id);
}

//nih contohnya
        window.getTextContent = function() {
            const element = container("demoText");
            const outputElement = container("output1");
            outputElement.textContent = `Teks yang didapat: "${element.textContent.trim()}"`;
        };</div>

            <div class="example">
                <div class="demo-box" id="demoText">
                    Ini adalah teks dalam container
                </div>
                <button onclick="getTextContent()">Tampilkan Teks</button>
                <div class="output-area" id="output1"></div>
            </div>
        </div>

        <!-- onClick Function -->
        <div class="section">
            <h2>2. Fungsi onClick()</h2>
            <p>Fungsi <code>onClick()</code> adalah wrapper untuk menambahkan event listener click ke element. 
               Fungsi ini memudahkan kita untuk menangani event click pada element HTML.</p>
            
            <div class="code-block">
export function onClick(id, actionfunctionname){
    document.getElementById(id).onclick = actionfunctionname;
}</div>

            <h3>Contoh 1: Counter Sederhana</h3>
            <div class="example">
                <div class="demo-box">
                    <p>Counter: <span id="counter" class="counter">0</span></p>
                    <button id="incrementBtn">Tambah</button>
                    <button id="decrementBtn">Kurang</button>
                    <button id="resetCounterBtn">Reset</button>
                </div>
                <div class="code-block">
// Contoh penggunaan onClick:
let count = 0;

onClick("incrementBtn", function() {
    count++;
    container("counter").textContent = count;
});

onClick("decrementBtn", function() {
    count--;
    container("counter").textContent = count;
});

onClick("resetCounterBtn", function() {
    count = 0;
    container("counter").textContent = count;
});</div>
            </div>

            <h3>Contoh 2: Mengubah Warna</h3>
            <div class="example">
                <div class="demo-box" id="colorBox">
                    Klik tombol untuk mengubah warna box ini
                </div>
                <button id="changeColorBtn">Ubah Warna</button>
                <div class="code-block">
// Contoh penggunaan onClick untuk mengubah warna:
onClick("changeColorBtn", function() {
    const colors = ['#4CAF50', '#2196F3', '#f44336', '#9C27B0'];
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    container("colorBox").style.backgroundColor = randomColor;
});</div>
        </div>

        <!-- onChange Function -->
        <div class="section">
            <h2>3. Fungsi onChange()</h2>
            <p>Fungsi <code>onChange()</code> adalah wrapper untuk menangani perubahan nilai pada element form (seperti input, select, textarea). 
               Fungsi ini memudahkan kita untuk merespons perubahan nilai pada element HTML.</p>
            
            <div class="code-block">
export function onChange(id, actionfunctionname){
    document.getElementById(id).onchange = function(event) {
        actionfunctionname(event.target);
    };
}</div>

            <h3>Contoh 1: Select Box</h3>
            <div class="example">
                <div class="demo-box">
                    <label for="fruitSelect">Pilih Buah:</label>
                    <select id="fruitSelect">
                        <option value="">Pilih satu...</option>
                        <option value="apple">Apel</option>
                        <option value="banana">Pisang</option>
                        <option value="orange">Jeruk</option>
                    </select>
                    <div class="output-area" id="fruitOutput"></div>
                </div>
                <div class="code-block">
// Contoh penggunaan onChange dengan select:
onChange("fruitSelect", function(element) {
    const selectedText = element.options[element.selectedIndex].text;
    container("fruitOutput").textContent = 
        `Anda memilih: ${selectedText}`;
});</div>
            </div>

            <h3>Contoh 2: Color Picker</h3>
            <div class="example">
                <div class="demo-box">
                    <label for="colorPicker">Pilih Warna:</label>
                    <input type="color" id="colorPicker" value="#4CAF50">
                    <div id="colorPreview" class="color-preview"></div>
                    <div class="output-area" id="colorOutput"></div>
                </div>
                <div class="code-block">
// Contoh penggunaan onChange dengan color picker:
onChange("colorPicker", function(element) {
    const color = element.value;
    container("colorPreview").style.backgroundColor = color;
    container("colorOutput").textContent = 
        `Kode warna: ${color}`;
});</div>
            </div>

            <h3>Contoh 3: File Input</h3>
            <div class="example">
                <div class="demo-box">
                    <label for="fileInput">Pilih File:</label>
                    <input type="file" id="fileInput">
                    <div class="output-area" id="fileOutput"></div>
                </div>
                <div class="code-block">
// Contoh penggunaan onChange dengan file input:
onChange("fileInput", function(element) {
    const file = element.files[0];
    container("fileOutput").textContent = 
        `File: ${file.name}\nUkuran: ${(file.size/1024).toFixed(2)} KB`;
});</div>
 <!-- onInput Function -->
 <div class="section">
    <h2>4. Fungsi onInput()</h2>
    <p>Fungsi <code>onInput()</code> adalah wrapper untuk menangani perubahan nilai secara real-time pada element form. 
       Berbeda dengan onChange yang menunggu element kehilangan fokus, onInput bereaksi setiap kali ada perubahan.</p>
    
    <div class="code-block">
export function onInput(id, actionfunctionname){
document.getElementById(id).oninput = function(event) {
actionfunctionname(event.target);
};
}</div>

    <h3>Contoh 1: Real-time Character Counter</h3>
    <div class="example">
        <div class="demo-box">
            <label for="messageInput">Pesan:</label>
            <textarea id="messageInput" rows="4" maxlength="100" placeholder="Ketik pesan Anda..."></textarea>
            <div class="character-count" id="charCount">0/100 karakter</div>
        </div>
        <div class="code-block">
// Contoh penggunaan onInput untuk menghitung karakter:
onInput("messageInput", function(element) {
const maxLength = element.maxLength;
const currentLength = element.value.length;
container("charCount").textContent = 
`${currentLength}/${maxLength} karakter`;
});</div>
    </div>

    <h3>Contoh 2: Real-time Range Slider</h3>
    <div class="example">
        <div class="demo-box">
            <label for="rangeSlider">Atur Nilai (0-100):</label>
            <input type="range" id="rangeSlider" min="0" max="100" value="50">
            <div class="output-area" id="rangeOutput">Nilai: 50</div>
        </div>
        <div class="code-block">
// Contoh penggunaan onInput dengan range slider:
onInput("rangeSlider", function(element) {
container("rangeOutput").textContent = 
`Nilai: ${element.value}`;
});</div>
    </div>

    <h3>Contoh 3: Perbandingan onChange vs onInput</h3>
    <div class="example">
        <div class="demo-box">
            <div class="compare-inputs">
                <div class="compare-box">
                    <label for="onChangeInput">onChange:</label>
                    <input type="text" id="onChangeInput" placeholder="Ketik disini...">
                    <div class="output-area" id="onChangeOutput">Menunggu perubahan...</div>
                </div>
                <div class="compare-box">
                    <label for="onInputDemo">onInput:</label>
                    <input type="text" id="onInputDemo" placeholder="Ketik disini...">
                    <div class="output-area" id="onInputOutput">Menunggu input...</div>
                </div>
            </div>
        </div>
        <div class="code-block">
// Perbandingan onChange dan onInput:
onChange("onChangeInput", function(element) {
container("onChangeOutput").textContent = 
`Nilai: ${element.value}`;
});

onInput("onInputDemo", function(element) {
container("onInputOutput").textContent = 
`Nilai: ${element.value}`;
});</div>
    </div>
    <h1>5. Function runAfterDOM()</h1>
        
    <div class="section">
        <h2>Penjelasan Fungsi</h2>
        <p>Fungsi <code>runAfterDOM()</code> digunakan untuk menjalankan kode setelah DOM (Document Object Model) selesai dimuat,
           tetapi sebelum semua resources (gambar, stylesheet, dll) selesai dimuat.</p>
        
        <div class="code-block">
export function runAfterDOM(runFunctionEvent){
window.addEventListener('DOMContentLoaded',(event) => {
    runFunctionEvent(event)
});
}</div>

        <div class="example">
            <h3>Kapan Menggunakan:</h3>
            <ul>
                <li>Inisialisasi komponen UI</li>
                <li>Setup event listeners</li>
                <li>Mengisi data awal</li>
                <li>Validasi form saat halaman dimuat</li>
            </ul>
        </div>

        <h3>Contoh 1: Inisialisasi Konten</h3>
        <div class="example">
            <div class="demo-box">
                <div id="initContent">
                    <h4>Konten yang Diinisialisasi</h4>
                    <p>Konten ini akan muncul dengan efek fade setelah DOM dimuat.</p>
                </div>
                <div id="domStatus" class="status pending">Menunggu DOM Loading...</div>
            </div>
            <div class="code-block">
// Contoh penggunaan runAfterDOM untuk inisialisasi:
runAfterDOM(function(event) {
const content = document.getElementById('initContent');
const status = document.getElementById('domStatus');

// Update status
status.className = 'status success';
status.textContent = 'DOM telah dimuat!';

// Tampilkan konten dengan fade
content.style.opacity = '1';
});</div>
        </div>

        <h3>Contoh 2: Setup Event Listeners</h3>
        <div class="example">
            <div class="demo-box">
                <div id="listenerContainer">
                    <button id="demoButton">Klik Saya</button>
                    <div id="buttonOutput" class="output-area"></div>
                </div>
                <div id="listenerStatus" class="status pending">Menunggu setup event listeners...</div>
            </div>
            <div class="code-block">
// Contoh penggunaan runAfterDOM untuk setup listeners:
runAfterDOM(function(event) {
const button = document.getElementById('demoButton');
const status = document.getElementById('listenerStatus');

// Setup event listener
button.addEventListener('click', function() {
    document.getElementById('buttonOutput')
        .textContent = 'Button diklik!';
});

// Update status
status.className = 'status success';
status.textContent = 'Event listeners telah di-setup!';
});</div>
        </div>

        <h3>Contoh 3: Form Validation Setup</h3>
        <div class="example">
            <div class="demo-box">
                <form id="demoForm">
                    <input type="text" id="username" placeholder="Username">
                    <div id="validationOutput" class="output-area"></div>
                </form>
                <div id="formStatus" class="status pending">Menunggu setup validasi...</div>
            </div>
            <div class="code-block">
// Contoh penggunaan runAfterDOM untuk setup validasi:
runAfterDOM(function(event) {
const input = document.getElementById('username');
const status = document.getElementById('formStatus');

// Setup validasi
input.addEventListener('input', function() {
    const output = document.getElementById('validationOutput');
    if(this.value.length < 3) {
        output.textContent = 'Username minimal 3 karakter';
    } else {
        output.textContent = 'Username valid';
    }
});

// Update status
status.className = 'status success';
status.textContent = 'Validasi form telah di-setup!';
});</div>
        </div>

        <h1>6. Function runAfterAll()</h1>
        
        <div class="section">
            <h2>Penjelasan Fungsi</h2>
            <p>Fungsi <code>runAfterAll()</code> digunakan untuk menjalankan kode setelah semua resources (HTML, CSS, gambar, script, dll) 
               selesai dimuat. Ini berbeda dengan runAfterDOM() yang hanya menunggu struktur DOM.</p>
            
            <div class="code-block">
export function runAfterAll(runFunctionEvent){
    window.addEventListener('load', (event) => {
        runFunctionEvent(event)
    });
}</div>

            <h3>Perbandingan Timing Events</h3>
            <div class="timing-diagram">
                <div class="timeline"></div>
                <div class="event-marker" style="left: 30%"></div>
                <div class="event-label" style="left: 30%">DOMContentLoaded<br>Struktur HTML siap</div>
                <div class="event-marker" style="left: 80%"></div>
                <div class="event-label" style="left: 80%">load<br>Semua resources siap</div>
            </div>

            <h3>Contoh 1: Image Loading Status</h3>
            <div class="example">
                <div class="demo-box">
                    <div class="image-container">
                        <img src="/api/placeholder/200/200" alt="Demo Image" id="demoImage">
                    </div>
                    <div id="imageLoadStatus" class="status pending">
                        <span class="loading-indicator"></span>
                        Menunggu gambar dimuat...
                    </div>
                </div>
                <div class="code-block">
// Contoh penggunaan runAfterAll untuk memastikan gambar dimuat:
runAfterAll(function(event) {
    const status = document.getElementById('imageLoadStatus');
    status.className = 'status success';
    status.innerHTML = 'Semua resources termasuk gambar telah dimuat!';
});</div>
            </div>

            <h3>Contoh 2: Resource Loading Report</h3>
            <div class="example">
                <div class="demo-box">
                    <div id="resourceReport" class="output-area">
                        Mengumpulkan informasi resources...
                    </div>
                </div>
                <div class="code-block">
// Contoh penggunaan runAfterAll untuk report resources:
runAfterAll(function(event) {
    const report = document.getElementById('resourceReport');
    const resources = performance.getEntriesByType('resource');
    let summary = `Total resources: ${resources.length}\n`;
    summary += `Images: ${resources.filter(r => r.initiatorType === 'img').length}\n`;
    summary += `Scripts: ${resources.filter(r => r.initiatorType === 'script').length}\n`;
    summary += `Stylesheets: ${resources.filter(r => r.initiatorType === 'link').length}`;
    report.textContent = summary;
});</div>
            </div>

            <h3>Contoh 3: Lazy Loading Setup</h3>
            <div class="example">
                <div class="demo-box">
                    <div id="lazyLoadContainer">
                        <div class="status pending">Menunggu setup lazy loading...</div>
                    </div>
                </div>
                <div class="code-block">
// Contoh penggunaan runAfterAll untuk setup lazy loading:
runAfterAll(function(event) {
    const container = document.getElementById('lazyLoadContainer');
    container.innerHTML = `
        <div class="status success">
            Lazy loading telah di-setup!
            Scroll untuk memuat konten tambahan.
        </div>
    `;
    // Setup intersection observer untuk lazy loading
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Load content when visible
                entry.target.src = entry.target.dataset.src;
                observer.unobserve(entry.target);
            }
        });
    });
});</div>
            </div>
</div>
</div>


    <script type="module">
        import { container, onClick, onChange,onInput,runAfterDOM,runAfterAll    } from 'https://cdn.jsdelivr.net/gh/jscroot/lib@0.2.0/element.js';

        // Container function examples
        window.getTextContent = function() {
            const element = container("demoText");
            const outputElement = container("output1");
            outputElement.textContent = `Teks yang didapat: "${element.textContent.trim()}"`;
        };

          // onClick examples
          let count = 0;

onClick("incrementBtn", function() {
    count++;
    container("counter").textContent = count;
});

onClick("decrementBtn", function() {
    count--;
    container("counter").textContent = count;
});

onClick("resetCounterBtn", function() {
    count = 0;
    container("counter").textContent = count;
});

onClick("changeColorBtn", function() {
    const colors = ['#4CAF50', '#2196F3', '#f44336', '#9C27B0'];
    const randomColor = colors[Math.floor(Math.random() * colors.length)];
    container("colorBox").style.backgroundColor = randomColor;
    container("colorBox").style.color = 'white';
});

        // onChange examples
        onChange("fruitSelect", function(element) {
            const selectedText = element.options[element.selectedIndex].text;
            container("fruitOutput").textContent = `Anda memilih: ${selectedText}`;
        });

        onChange("colorPicker", function(element) {
            const color = element.value;
            container("colorPreview").style.backgroundColor = color;
            container("colorOutput").textContent = `Kode warna: ${color}`;
        });

        onChange("fileInput", function(element) {
            const file = element.files[0];
            container("fileOutput").textContent = 
                `File: ${file.name}\nUkuran: ${(file.size/1024).toFixed(2)} KB`;
        });

        // Initialize color preview
        container("colorPreview").style.backgroundColor = "#4CAF50";
        //4
          // onInput examples
          onInput("messageInput", function(element) {
            const maxLength = element.maxLength;
            const currentLength = element.value.length;
            container("charCount").textContent = `${currentLength}/${maxLength} karakter`;
        });

        onInput("rangeSlider", function(element) {
            container("rangeOutput").textContent = `Nilai: ${element.value}`;
        });

        // Comparison examples
        onChange("onChangeInput", function(element) {
            container("onChangeOutput").textContent = `Nilai: ${element.value}`;
        });

        onInput("onInputDemo", function(element) {
            container("onInputOutput").textContent = `Nilai: ${element.value}`;
        });
        //5
         // Example 1: Content Initialization
         runAfterDOM(function(event) {
            const content = document.getElementById('initContent');
            const status = document.getElementById('domStatus');
            
            status.className = 'status success';
            status.textContent = 'DOM telah dimuat!';
            
            content.style.opacity = '1';
        });

        // Example 2: Event Listener Setup
        runAfterDOM(function(event) {
            const button = document.getElementById('demoButton');
            const status = document.getElementById('listenerStatus');
            
            button.addEventListener('click', function() {
                document.getElementById('buttonOutput').textContent = 'Button diklik!';
            });
            
            status.className = 'status success';
            status.textContent = 'Event listeners telah di-setup!';
        });

        // Example 3: Form Validation Setup
        runAfterDOM(function(event) {
            const input = document.getElementById('username');
            const status = document.getElementById('formStatus');
            
            input.addEventListener('input', function() {
                const output = document.getElementById('validationOutput');
                if(this.value.length < 3) {
                    output.textContent = 'Username minimal 3 karakter';
                } else {
                    output.textContent = 'Username valid';
                }
            });
            
            status.className = 'status success';
            status.textContent = 'Validasi form telah di-setup!';
        });
        //6
          // Example 1: Image Loading Status
          runAfterAll(function(event) {
            const status = document.getElementById('imageLoadStatus');
            status.className = 'status success';
            status.innerHTML = 'Semua resources termasuk gambar telah dimuat!';
        });

        // Example 2: Resource Loading Report
        runAfterAll(function(event) {
            const report = document.getElementById('resourceReport');
            const resources = performance.getEntriesByType('resource');
            let summary = `Total resources: ${resources.length}\n`;
            summary += `Images: ${resources.filter(r => r.initiatorType === 'img').length}\n`;
            summary += `Scripts: ${resources.filter(r => r.initiatorType === 'script').length}\n`;
            summary += `Stylesheets: ${resources.filter(r => r.initiatorType === 'link').length}`;
            report.textContent = summary;
        });

        // Example 3: Lazy Loading Setup
        runAfterAll(function(event) {
            const container = document.getElementById('lazyLoadContainer');
            container.innerHTML = `
                <div class="status success">
                    Lazy loading telah di-setup!
                    Scroll untuk memuat konten tambahan.
                </div>
            `;
        });
    </script>
</body>
</html>